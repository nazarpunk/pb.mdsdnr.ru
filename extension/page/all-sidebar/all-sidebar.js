"use strict";
const sidebar_pages = {
    news: [`/news/index`, `Новости`],
    pPOOt: [`pPOOt/admin`, `Касса`],
    uprochenNewJF0100103: [`uprochenNewJF0100103/admin`, `Упрощённый <sup>новая</sup>`],
    podohNew: [`podohNew/admin`, `Подоходный <sup>новая</sup>`],
    declNalOborot: [`declNalOborot/admin`, `Оборот`],
    declprib20: [`declprib20/admin`, `Прибыль <sup>01.01.2020</sup>`],
    esvPrepdr: [`esvPrepdr/admin`, `ЕСВ <sup>работники</sup>`],
    esvYear2: [`esvYear/admin2`, `ЕСВ <sup>прибыль</sup>`],
    esvYear: [`esvYear/admin`, `ЕСВ <sup>год</sup>`],
    nalRaschetVinograd: [`nalRaschetVinograd/admin`, `Хмель`],
    declVodaNew: [`declVodaNew/admin`, `Вода`],
    ecologiya: [`ecologiya/admin`, `Экология`],
    zemDecl: [`zemDecl/admin`, `Земля`],
    dogovorSign: [`dogovorSign/admin`, `Договор ЭД`],
    actSver: [`actSver/admin`, `Акт сверки`],
    patentDecl: [`patentDecl/admin`, `Патент ФЛП`],
    declNalogGraNew: [`declNalogGraNew/admin`, `Доход ФЛП`]
};
{
    const $wrap = document.querySelector(`.wrapper > .main-sidebar`);
    if ($wrap !== null) {
        if (isClientLogged) {
            document.body.prepend($wrap);
            $wrap.querySelectorAll(`br`).forEach($br => $br.remove());
            const $sidebar = $wrap.querySelector(`.sidebar`);
            $sidebar.querySelectorAll(`.sidebar-menu a`).forEach($a => {
                if ($a.getAttribute(`href`) === `#`)
                    return;
                $sidebar.append($a);
            });
            $sidebar.querySelector(`.sidebar-menu`).remove();
            const $linkDocument = $sidebar.querySelector(`[href='index.php?r=dOCS/admin'] span`);
            if ($linkDocument !== null)
                $linkDocument.innerHTML = `Документы`;
            chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, { getClientSidebar: clientId }, ({ ID, sidebar }) => {
                Object.entries(sidebar_pages).forEach(([k, v]) => {
                    const isActive = k === pageName ? `active` : ``;
                    const isShow = sidebar.indexOf(k) < 0 ? `true` : `false`;
                    $sidebar.insertAdjacentHTML(`beforeend`, `<a href="/privcab/index.php?r=${v[0]}" class="${isActive}" data-show="${isShow}" data-name="${k}"><div><i class="fa fa-files-o"></i><span>${v[1]}</span></div></a>`);
                });
                if (ID > 0) {
                    const $header = document.querySelector(`.main-header`);
                    if ($header === null)
                        return;
                    $sidebar.insertAdjacentHTML(`beforeend`, `<div class="text-center"><button id="all-sidebar-setting-btn" class="btn btn-xs btn-primary">Настроить</button></div>`);
                    const $showBtn = document.getElementById(`all-sidebar-setting-btn`);
                    $showBtn.addEventListener(`click`, (e) => {
                        e.preventDefault();
                        $showBtn.style.display = `none`;
                        document.body.style.paddingRight = `${window.innerWidth - document.body.clientWidth}px`;
                        document.body.style.overflow = `hidden`;
                        document.body.insertAdjacentHTML(`afterbegin`, `<div id="sidebar-setting-wrap" style="top:${$header.offsetHeight}px"></div>`);
                        const $wrap = document.getElementById(`sidebar-setting-wrap`);
                        $wrap.style.animation = `sidebar-fade-in 400ms both`;
                        const $inner = document.createElement(`div`);
                        $wrap.insertAdjacentElement(`beforeend`, $inner);
                        Object.entries(sidebar_pages).forEach(([k, v]) => {
                            const isChecked = sidebar.indexOf(k) < 0 ? `checked` : ``;
                            $inner.insertAdjacentHTML(`beforeend`, `<label><label class="rocker"><input type="checkbox" ${isChecked} data-name="${k}" autocomplete="off"><span class="switch-left"><i class="fa fa-check"></i></span><span class="switch-right"><i class="fa fa-close"></i></span></label><span>${v[1]}</span></label>`);
                        });
                        $wrap.addEventListener(`change`, () => {
                            const sidebar = [];
                            $wrap.querySelectorAll(`[type=checkbox]`).forEach($checkbox => {
                                if (!$checkbox.checked)
                                    sidebar.push($checkbox.dataset.name);
                                const $a = $sidebar.querySelector(`[data-name='${$checkbox.dataset.name}']`);
                                if ($a !== null)
                                    $a.dataset.show = $checkbox.checked ? `true` : `false`;
                            });
                            chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, {
                                setClientSidebar: clientId, sidebar: sidebar.join(`,`)
                            }, () => {
                                chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, { updateData: true });
                            });
                        });
                        $wrap.insertAdjacentHTML(`afterend`, `<button id="sidebar-setting-close-button" type="button" class="btn btn-danger btn-default"  style="top:${$header.offsetHeight}px"><i class="fa fa-close"></i></button>`);
                        const $closeBtn = document.getElementById(`sidebar-setting-close-button`);
                        $closeBtn.addEventListener(`click`, () => {
                            $closeBtn.remove();
                            $wrap.addEventListener(`animationend`, () => {
                                document.body.removeAttribute(`style`);
                                $wrap.remove();
                                $showBtn.style.removeProperty(`display`);
                            });
                            $wrap.style.animation = `sidebar-fade-out 400ms both`;
                        });
                    });
                }
            });
        }
        else {
            $wrap.remove();
        }
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuc2lvbi9wYWdlL2FsbC1zaWRlYmFyL2FsbC1zaWRlYmFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxNQUFNLGFBQWEsR0FBRztJQUNyQixJQUFJLEVBQWtCLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQztJQUNoRCxLQUFLLEVBQWlCLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQztJQUU5QyxvQkFBb0IsRUFBRSxDQUFDLDRCQUE0QixFQUFFLDZCQUE2QixDQUFDO0lBRW5GLFFBQVEsRUFBYyxDQUFDLGdCQUFnQixFQUFFLDZCQUE2QixDQUFDO0lBQ3ZFLGFBQWEsRUFBUyxDQUFDLHFCQUFxQixFQUFFLFFBQVEsQ0FBQztJQUV2RCxVQUFVLEVBQVksQ0FBQyxrQkFBa0IsRUFBRSwrQkFBK0IsQ0FBQztJQUMzRSxTQUFTLEVBQWEsQ0FBQyxpQkFBaUIsRUFBRSwwQkFBMEIsQ0FBQztJQUNyRSxRQUFRLEVBQWMsQ0FBQyxnQkFBZ0IsRUFBRSx3QkFBd0IsQ0FBQztJQUNsRSxPQUFPLEVBQWUsQ0FBQyxlQUFlLEVBQUUsb0JBQW9CLENBQUM7SUFDN0Qsa0JBQWtCLEVBQUksQ0FBQywwQkFBMEIsRUFBRSxPQUFPLENBQUM7SUFDM0QsV0FBVyxFQUFXLENBQUMsbUJBQW1CLEVBQUUsTUFBTSxDQUFDO0lBQ25ELFNBQVMsRUFBYSxDQUFDLGlCQUFpQixFQUFFLFVBQVUsQ0FBQztJQUNyRCxPQUFPLEVBQWUsQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDO0lBQ2hELFdBQVcsRUFBVyxDQUFDLG1CQUFtQixFQUFFLFlBQVksQ0FBQztJQUN6RCxPQUFPLEVBQWUsQ0FBQyxlQUFlLEVBQUUsWUFBWSxDQUFDO0lBQ3JELFVBQVUsRUFBWSxDQUFDLGtCQUFrQixFQUFFLFlBQVksQ0FBQztJQUN4RCxlQUFlLEVBQU8sQ0FBQyx1QkFBdUIsRUFBRSxXQUFXLENBQUM7Q0FDNUQsQ0FBQTtBQUNEO0lBQ0MsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFB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QUFFLENBQUM7Z0NBQ2YsUUFBUSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7NEJBQzFDLENBQUMsQ0FBQyxDQUFDOzRCQUNILEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLDZCQUE2QixDQUFDO3dCQUN2RCxDQUFDLENBQUMsQ0FBQztvQkFDSixDQUFDLENBQUMsQ0FBQztpQkFDSDtZQUNGLENBQUMsQ0FBQyxDQUFDO1NBQ0o7YUFBTTtZQUNOLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO0tBQ0Q7Q0FDRCIsImZpbGUiOiJleHRlbnNpb24vcGFnZS9hbGwtc2lkZWJhci9hbGwtc2lkZWJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9wYWdlLmQudHNcIiAvPlxuY29uc3Qgc2lkZWJhcl9wYWdlcyA9IHtcblx0bmV3cyAgICAgICAgICAgICAgICA6IFtgL25ld3MvaW5kZXhgLCBg0J3QvtCy0L7RgdGC0LhgXSxcblx0cFBPT3QgICAgICAgICAgICAgICA6IFtgcFBPT3QvYWRtaW5gLCBg0JrQsNGB0YHQsGBdLFxuXHQvL3Vwcm9jaGVuTmV3ICAgICAgICAgOiBbYHVwcm9jaGVuTmV3L2FkbWluYCwgYNCj0L/RgNC+0YnRkdC90L3Ri9C5YF0sXG5cdHVwcm9jaGVuTmV3SkYwMTAwMTAzOiBbYHVwcm9jaGVuTmV3SkYwMTAwMTAzL2FkbWluYCwgYNCj0L/RgNC+0YnRkdC90L3Ri9C5IDxzdXA+0L3QvtCy0LDRjzwvc3VwPmBdLFxuXHQvL3BvZG9oICAgICAgICAgICAgICAgOiBbYHBvZG9oL2FkbWluYCwgYNCf0L7QtNC+0YXQvtC00L3Ri9C5YF0sXG5cdHBvZG9oTmV3ICAgICAgICAgICAgOiBbYHBvZG9oTmV3L2FkbWluYCwgYNCf0L7QtNC+0YXQvtC00L3Ri9C5IDxzdXA+0L3QvtCy0LDRjzwvc3VwPmBdLFxuXHRkZWNsTmFsT2Jvcm90ICAgICAgIDogW2BkZWNsTmFsT2Jvcm90L2FkbWluYCwgYNCe0LHQvtGA0L7RgmBdLFxuXHQvL2RlY2xwcmliTmV3ICAgICAgICAgOiBbYGRlY2xwcmliTmV3L2FkbWluYCwgYNCf0YDQuNCx0YvQu9GMYF0sXG5cdGRlY2xwcmliMjAgICAgICAgICAgOiBbYGRlY2xwcmliMjAvYWRtaW5gLCBg0J/RgNC40LHRi9C70YwgPHN1cD4wMS4wMS4yMDIwPC9zdXA+YF0sXG5cdGVzdlByZXBkciAgICAgICAgICAgOiBbYGVzdlByZXBkci9hZG1pbmAsIGDQldCh0JIgPHN1cD7RgNCw0LHQvtGC0L3QuNC60Lg8L3N1cD5gXSxcblx0ZXN2WWVhcjIgICAgICAgICAgICA6IFtgZXN2WWVhci9hZG1pbjJgLCBg0JXQodCSIDxzdXA+0L/RgNC40LHRi9C70Yw8L3N1cD5gXSxcblx0ZXN2WWVhciAgICAgICAgICAgICA6IFtgZXN2WWVhci9hZG1pbmAsIGDQldCh0JIgPHN1cD7Qs9C+0LQ8L3N1cD5gXSxcblx0bmFsUmFzY2hldFZpbm9ncmFkICA6IFtgbmFsUmFzY2hldFZpbm9ncmFkL2FkbWluYCwgYNCl0LzQtdC70YxgXSxcblx0ZGVjbFZvZGFOZXcgICAgICAgICA6IFtgZGVjbFZvZGFOZXcvYWRtaW5gLCBg0JLQvtC00LBgXSxcblx0ZWNvbG9naXlhICAgICAgICAgICA6IFtgZWNvbG9naXlhL2FkbWluYCwgYNCt0LrQvtC70L7Qs9C40Y9gXSxcblx0emVtRGVjbCAgICAgICAgICAgICA6IFtgemVtRGVjbC9hZG1pbmAsIGDQl9C10LzQu9GPYF0sXG5cdGRvZ292b3JTaWduICAgICAgICAgOiBbYGRvZ292b3JTaWduL2FkbWluYCwgYNCU0L7Qs9C+0LLQvtGAINCt0JRgXSxcblx0YWN0U3ZlciAgICAgICAgICAgICA6IFtgYWN0U3Zlci9hZG1pbmAsIGDQkNC60YIg0YHQstC10YDQutC4YF0sXG5cdHBhdGVudERlY2wgICAgICAgICAgOiBbYHBhdGVudERlY2wvYWRtaW5gLCBg0J/QsNGC0LXQvdGCINCk0JvQn2BdLFxuXHRkZWNsTmFsb2dHcmFOZXcgICAgIDogW2BkZWNsTmFsb2dHcmFOZXcvYWRtaW5gLCBg0JTQvtGF0L7QtCDQpNCb0J9gXVxufVxue1xuXHRjb25zdCAkd3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KGAud3JhcHBlciA+IC5tYWluLXNpZGViYXJgKTtcblx0aWYgKCR3cmFwICE9PSBudWxsKSB7XG5cdFx0XG5cdFx0aWYgKGlzQ2xpZW50TG9nZ2VkKSB7XG5cdFx0XHRkb2N1bWVudC5ib2R5LnByZXBlbmQoJHdyYXApO1xuXHRcdFx0XG5cdFx0XHQkd3JhcC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihgYnJgKS5mb3JFYWNoKCRiciA9PiAkYnIucmVtb3ZlKCkpO1xuXHRcdFx0XG5cdFx0XHRjb25zdCAkc2lkZWJhciA9ICR3cmFwLnF1ZXJ5U2VsZWN0b3IoYC5zaWRlYmFyYCkhO1xuXHRcdFx0XG5cdFx0XHQkc2lkZWJhci5xdWVyeVNlbGVjdG9yQWxsKGAuc2lkZWJhci1tZW51IGFgKS5mb3JFYWNoKCRhID0+IHtcblx0XHRcdFx0aWYgKCRhLmdldEF0dHJpYnV0ZShgaHJlZmApID09PSBgI2ApIHJldHVybjtcblx0XHRcdFx0JHNpZGViYXIuYXBwZW5kKCRhKTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQkc2lkZWJhci5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihgLnNpZGViYXItbWVudWApIS5yZW1vdmUoKTtcblx0XHRcdGNvbnN0ICRsaW5rRG9jdW1lbnQgPSAkc2lkZWJhci5xdWVyeVNlbGVjdG9yKGBbaHJlZj0naW5kZXgucGhwP3I9ZE9DUy9hZG1pbiddIHNwYW5gKTtcblx0XHRcdGlmICgkbGlua0RvY3VtZW50ICE9PSBudWxsKSAkbGlua0RvY3VtZW50LmlubmVySFRNTCA9IGDQlNC+0LrRg9C80LXQvdGC0YtgO1xuXHRcdFx0XG5cdFx0XHQvLyBtYW5pZmVzdFxuXHRcdFx0Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoXG5cdFx0XHRcdGRvY3VtZW50LmhlYWQuZGF0YXNldC5leHRlbnNpb25JZCB8fCBgYCxcblx0XHRcdFx0e2dldENsaWVudFNpZGViYXI6IGNsaWVudElkfSxcblx0XHRcdFx0KHtJRCwgc2lkZWJhcn0pID0+IHtcblx0XHRcdFx0XHRPYmplY3QuZW50cmllcyhzaWRlYmFyX3BhZ2VzKS5mb3JFYWNoKChbaywgdl0pID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGlzQWN0aXZlID0gayA9PT0gcGFnZU5hbWUgPyBgYWN0aXZlYCA6IGBgO1xuXHRcdFx0XHRcdFx0Y29uc3QgaXNTaG93ID0gc2lkZWJhci5pbmRleE9mKGspIDwgMCA/IGB0cnVlYCA6IGBmYWxzZWA7XG5cdFx0XHRcdFx0XHQkc2lkZWJhci5pbnNlcnRBZGphY2VudEhUTUwoYGJlZm9yZWVuZGAsIGA8YSBocmVmPVwiL3ByaXZjYWIvaW5kZXgucGhwP3I9JHt2WzBdfVwiIGNsYXNzPVwiJHtpc0FjdGl2ZX1cIiBkYXRhLXNob3c9XCIke2lzU2hvd31cIiBkYXRhLW5hbWU9XCIke2t9XCI+PGRpdj48aSBjbGFzcz1cImZhIGZhLWZpbGVzLW9cIj48L2k+PHNwYW4+JHt2WzFdfTwvc3Bhbj48L2Rpdj48L2E+YClcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoSUQgPiAwKSB7XG5cdFx0XHRcdFx0XHRjb25zdCAkaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oYC5tYWluLWhlYWRlcmApO1xuXHRcdFx0XHRcdFx0aWYgKCRoZWFkZXIgPT09IG51bGwpIHJldHVybjtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0JHNpZGViYXIuaW5zZXJ0QWRqYWNlbnRIVE1MKGBiZWZvcmVlbmRgLCBgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+PGJ1dHRvbiBpZD1cImFsbC1zaWRlYmFyLXNldHRpbmctYnRuXCIgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1wcmltYXJ5XCI+0J3QsNGB0YLRgNC+0LjRgtGMPC9idXR0b24+PC9kaXY+YCk7XG5cdFx0XHRcdFx0XHRjb25zdCAkc2hvd0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBhbGwtc2lkZWJhci1zZXR0aW5nLWJ0bmApITtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0JHNob3dCdG4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdCRzaG93QnRuLnN0eWxlLmRpc3BsYXkgPSBgbm9uZWA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IGAke3dpbmRvdy5pbm5lcldpZHRoIC0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aH1weGA7XG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBgaGlkZGVuYDtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKGBhZnRlcmJlZ2luYCwgYDxkaXYgaWQ9XCJzaWRlYmFyLXNldHRpbmctd3JhcFwiIHN0eWxlPVwidG9wOiR7JGhlYWRlci5vZmZzZXRIZWlnaHR9cHhcIj48L2Rpdj5gKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgJHdyYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc2lkZWJhci1zZXR0aW5nLXdyYXBgKSE7XG5cdFx0XHRcdFx0XHRcdCR3cmFwLnN0eWxlLmFuaW1hdGlvbiA9IGBzaWRlYmFyLWZhZGUtaW4gNDAwbXMgYm90aGA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRjb25zdCAkaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBkaXZgKTtcblx0XHRcdFx0XHRcdFx0JHdyYXAuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGBiZWZvcmVlbmRgLCAkaW5uZXIpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gcGFnZXNcblx0XHRcdFx0XHRcdFx0T2JqZWN0LmVudHJpZXMoc2lkZWJhcl9wYWdlcykuZm9yRWFjaCgoW2ssIHZdKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNDaGVja2VkID0gc2lkZWJhci5pbmRleE9mKGspIDwgMCA/IGBjaGVja2VkYCA6IGBgO1xuXHRcdFx0XHRcdFx0XHRcdCRpbm5lci5pbnNlcnRBZGphY2VudEhUTUwoYGJlZm9yZWVuZGAsIGA8bGFiZWw+PGxhYmVsIGNsYXNzPVwicm9ja2VyXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiICR7aXNDaGVja2VkfSBkYXRhLW5hbWU9XCIke2t9XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+PHNwYW4gY2xhc3M9XCJzd2l0Y2gtbGVmdFwiPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+PC9zcGFuPjxzcGFuIGNsYXNzPVwic3dpdGNoLXJpZ2h0XCI+PGkgY2xhc3M9XCJmYSBmYS1jbG9zZVwiPjwvaT48L3NwYW4+PC9sYWJlbD48c3Bhbj4ke3ZbMV19PC9zcGFuPjwvbGFiZWw+YCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gY2hhbmdlXG5cdFx0XHRcdFx0XHRcdCR3cmFwLmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzaWRlYmFyOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdCR3cmFwLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oYFt0eXBlPWNoZWNrYm94XWApLmZvckVhY2goJGNoZWNrYm94ID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghJGNoZWNrYm94LmNoZWNrZWQpIHNpZGViYXIucHVzaCgkY2hlY2tib3guZGF0YXNldC5uYW1lISk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCAkYSA9ICRzaWRlYmFyLnF1ZXJ5U2VsZWN0b3I8SFRNTExpbmtFbGVtZW50PihgW2RhdGEtbmFtZT0nJHskY2hlY2tib3guZGF0YXNldC5uYW1lIX0nXWApO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCRhICE9PSBudWxsKSAkYS5kYXRhc2V0LnNob3cgPSAkY2hlY2tib3guY2hlY2tlZCA/IGB0cnVlYCA6IGBmYWxzZWA7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoXG5cdFx0XHRcdFx0XHRcdFx0XHRkb2N1bWVudC5oZWFkLmRhdGFzZXQuZXh0ZW5zaW9uSWQgfHwgYGAsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0Q2xpZW50U2lkZWJhcjogY2xpZW50SWQsIHNpZGViYXI6IHNpZGViYXIuam9pbihgLGApXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKGRvY3VtZW50LmhlYWQuZGF0YXNldC5leHRlbnNpb25JZCB8fCBgYCwge3VwZGF0ZURhdGE6IHRydWV9KTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIGNsb3NlXG5cdFx0XHRcdFx0XHRcdCR3cmFwLmluc2VydEFkamFjZW50SFRNTChgYWZ0ZXJlbmRgLCBgPGJ1dHRvbiBpZD1cInNpZGViYXItc2V0dGluZy1jbG9zZS1idXR0b25cIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlciBidG4tZGVmYXVsdFwiICBzdHlsZT1cInRvcDokeyRoZWFkZXIub2Zmc2V0SGVpZ2h0fXB4XCI+PGkgY2xhc3M9XCJmYSBmYS1jbG9zZVwiPjwvaT48L2J1dHRvbj5gKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgJGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNpZGViYXItc2V0dGluZy1jbG9zZS1idXR0b25gKSE7XG5cdFx0XHRcdFx0XHRcdCRjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHQkY2xvc2VCdG4ucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0JHdyYXAuYWRkRXZlbnRMaXN0ZW5lcihgYW5pbWF0aW9uZW5kYCwgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoYHN0eWxlYCk7XG5cdFx0XHRcdFx0XHRcdFx0XHQkd3JhcC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdCRzaG93QnRuLnN0eWxlLnJlbW92ZVByb3BlcnR5KGBkaXNwbGF5YCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0JHdyYXAuc3R5bGUuYW5pbWF0aW9uID0gYHNpZGViYXItZmFkZS1vdXQgNDAwbXMgYm90aGA7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JHdyYXAucmVtb3ZlKCk7XG5cdFx0fVxuXHR9XG59Il19
