"use strict";
(($wrap) => {
    const pages = {
        news: [`/news/index`, `Новости`],
        pPOOt: [`pPOOt/admin`, `Касса`],
        uprochenNewJF0100103: [`uprochenNewJF0100103/admin`, `Упрощённый <sup>новая</sup>`],
        podohNew: [`podohNew/admin`, `Подоходный <sup>новая</sup>`],
        declNalOborot: [`declNalOborot/admin`, `Оборот`],
        declprib20: [`declprib20/admin`, `Прибыль <sup>01.01.2020</sup>`],
        esvPrepdr: [`esvPrepdr/admin`, `ЕСВ <sup>работники</sup>`],
        esvYear2: [`esvYear/admin2`, `ЕСВ <sup>прибыль</sup>`],
        esvYear: [`esvYear/admin`, `ЕСВ <sup>год</sup>`],
        nalRaschetVinograd: [`nalRaschetVinograd/admin`, `Хмель`],
        declVodaNew: [`declVodaNew/admin`, `Вода`],
        ecologiya: [`ecologiya/admin`, `Экология`],
        zemDecl: [`zemDecl/admin`, `Земля`],
        dogovorSign: [`dogovorSign/admin`, `Договор ЭД`],
        actSver: [`actSver/admin`, `Акт сверки`]
    };
    if ($wrap === null)
        return;
    if (!isClientLogged)
        return $wrap.remove();
    document.body.prepend($wrap);
    $wrap.querySelectorAll(`br`).forEach($br => $br.remove());
    const $sidebar = $wrap.querySelector(`.sidebar`);
    $sidebar.querySelectorAll(`.sidebar-menu a`).forEach($a => {
        if ($a.getAttribute(`href`) === `#`)
            return;
        $sidebar.append($a);
    });
    $sidebar.querySelector(`.sidebar-menu`).remove();
    const $linkDocument = $sidebar.querySelector(`[href='index.php?r=dOCS/admin'] span`);
    if ($linkDocument !== null)
        $linkDocument.innerHTML = `Документы`;
    chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, { getClientSidebar: clientId }, ({ ID, sidebar }) => {
        Object.entries(pages).forEach(([k, v]) => {
            const isActive = k === pageName ? `active` : ``;
            const isShow = sidebar.indexOf(k) < 0 ? `true` : `false`;
            $sidebar.insertAdjacentHTML(`beforeend`, `<a href="/privcab/index.php?r=${v[0]}" class="${isActive}" data-show="${isShow}" data-name="${k}"><div><i class="fa fa-files-o"></i><span>${v[1]}</span></div></a>`);
        });
        if (ID > 0) {
            const $header = document.querySelector(`.main-header`);
            if ($header === null)
                return;
            $sidebar.insertAdjacentHTML(`beforeend`, `<div class="text-center"><button id="all-sidebar-setting-btn" class="btn btn-xs btn-primary">Настроить</button></div>`);
            const $showBtn = document.getElementById(`all-sidebar-setting-btn`);
            $showBtn.addEventListener(`click`, (e) => {
                e.preventDefault();
                $showBtn.style.display = `none`;
                document.body.style.paddingRight = `${window.innerWidth - document.body.clientWidth}px`;
                document.body.style.overflow = `hidden`;
                document.body.insertAdjacentHTML(`afterbegin`, `<div id="sidebar-setting-wrap" style="top:${$header.offsetHeight}px"></div>`);
                const $wrap = document.getElementById(`sidebar-setting-wrap`);
                $wrap.style.animation = `sidebar-fade-in 400ms both`;
                const $inner = document.createElement(`div`);
                $wrap.insertAdjacentElement(`beforeend`, $inner);
                Object.entries(pages).forEach(([k, v]) => {
                    const isChecked = sidebar.indexOf(k) < 0 ? `checked` : ``;
                    $inner.insertAdjacentHTML(`beforeend`, `<label><label class="rocker"><input type="checkbox" ${isChecked} data-name="${k}" autocomplete="off"><span class="switch-left"><i class="fa fa-check"></i></span><span class="switch-right"><i class="fa fa-close"></i></span></label><span>${v[1]}</span></label>`);
                });
                $wrap.addEventListener(`change`, () => {
                    const sidebar = [];
                    $wrap.querySelectorAll(`[type=checkbox]`).forEach($checkbox => {
                        if (!$checkbox.checked)
                            sidebar.push($checkbox.dataset.name);
                        const $a = $sidebar.querySelector(`[data-name='${$checkbox.dataset.name}']`);
                        if ($a !== null)
                            $a.dataset.show = $checkbox.checked ? `true` : `false`;
                    });
                    chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, {
                        setClientSidebar: clientId, sidebar: sidebar.join(`,`)
                    }, () => {
                        chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, { updateData: true });
                    });
                });
                $wrap.insertAdjacentHTML(`afterend`, `<button id="sidebar-setting-close-button" type="button" class="btn btn-danger btn-default"  style="top:${$header.offsetHeight}px"><i class="fa fa-close"></i></button>`);
                const $closeBtn = document.getElementById(`sidebar-setting-close-button`);
                $closeBtn.addEventListener(`click`, () => {
                    $closeBtn.remove();
                    $wrap.addEventListener(`animationend`, () => {
                        document.body.removeAttribute(`style`);
                        $wrap.remove();
                        $showBtn.style.removeProperty(`display`);
                    });
                    $wrap.style.animation = `sidebar-fade-out 400ms both`;
                });
            });
        }
    });
})(document.querySelector(`.wrapper > .main-sidebar`));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuc2lvbi9wYWdlL2FsbC1zaWRlYmFyL2FsbC1zaWRlYmFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxDQUFDLENBQUMsS0FBeUIsRUFBRSxFQUFFO0lBQzlCLE1BQU0sS0FBSyxHQUFHO1FBQ2IsSUFBSSxFQUFrQixDQUFDLGFBQWEsRUFBRSxTQUFTLENBQUM7UUFDaEQsS0FBSyxFQUFpQixDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUM7UUFFOUMsb0JBQW9CLEVBQUUsQ0FBQyw0QkFBNEIsRUFBRSw2QkFBNkIsQ0FBQztRQUVuRixRQUFRLEVBQWMsQ0FBQyxnQkFBZ0IsRUFBRSw2QkFBNkIsQ0FBQztRQUN2RSxhQUFhLEVBQVMsQ0FBQyxxQkFBcUIsRUFBRSxRQUFRLENBQUM7UUFFdkQsVUFBVSxFQUFZLENBQUMsa0JBQWtCLEVBQUUsK0JBQStCLENBQUM7UUFDM0UsU0FBUyxFQUFhLENBQUMsaUJBQWlCLEVBQUUsMEJBQTBCLENBQUM7UUFDckUsUUFBUSxFQUFjLENBQUMsZ0JBQWdCLEVBQUUsd0JBQXdCLENBQUM7UUFDbEUsT0FBTyxFQUFlLENBQUMsZUFBZSxFQUFFLG9CQUFvQixDQUFDO1FBQzdELGtCQUFrQixFQUFJLENBQUMsMEJBQTBCLEVBQUUsT0FBTyxDQUFDO1FBQzNELFdBQVcsRUFBVyxDQUFDLG1CQUFtQixFQUFFLE1BQU0sQ0FBQztRQUNuRCxTQUFTLEVBQWEsQ0FBQyxpQkFBaUIsRUFBRSxVQUFVLENBQUM7UUFDckQsT0FBTyxFQUFlLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQztRQUNoRCxXQUFXLEVBQVcsQ0FBQyxtQkFBbUIsRUFBRSxZQUFZLENBQUM7UUFDekQsT0FBTyxFQUFlLENBQUMsZUFBZSxFQUFFLFlBQVksQ0FBQztLQUNyRCxDQUFDO0lBRUYsSUFBSSxLQUFLLEtBQUssSUFBSTtRQUFFLE9BQU87SUFDM0IsSUFBSSxDQUFDLGNBQWM7UUFBRSxPQUFPLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUMzQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUU3QixLQUFLLENBQUMsZ0JBQWdCLENBQWMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFFdkUsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUUsQ0FBQztJQUVsRCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDekQsSUFBSSxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUc7WUFBRSxPQUFPO1FBQzVDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDckIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsYUFBYSxDQUFjLGVBQWUsQ0FBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQy9ELE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsc0NBQXNDLENBQUMsQ0FBQztJQUNyRixJQUFJLGFBQWEsS0FBSyxJQUFJO1FBQUUsYUFBYSxDQUFDLFNBQVMsR0FBRyxXQUFXLENBQUM7SUFHbEUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQ3pCLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsSUFBSSxFQUFFLEVBQ3ZDLEVBQUMsZ0JBQWdCLEVBQUUsUUFBUSxFQUFDLEVBQzVCLENBQUMsRUFBQyxFQUFFLEVBQUUsT0FBTyxFQUFDLEVBQUUsRUFBRTtRQUNqQixNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDeEMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDaEQsTUFBTSxNQUFNLEdBQUssT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO1lBQzNELFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLEVBQUUsaUNBQWlDLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxRQUFRLGdCQUFnQixNQUFNLGdCQUFnQixDQUFDLDZDQUE2QyxDQUFDLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUE7UUFDL00sQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUU7WUFDWCxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFjLGNBQWMsQ0FBQyxDQUFDO1lBQ3BFLElBQUksT0FBTyxLQUFLLElBQUk7Z0JBQUUsT0FBTztZQUU3QixRQUFRLENBQUMsa0JBQWtCLENBQUMsV0FBVyxFQUFFLHVIQUF1SCxDQUFDLENBQUM7WUFDbEssTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyx5QkFBeUIsQ0FBRSxDQUFDO1lBRXJFLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDeEMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO2dCQUNuQixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7Z0JBRWhDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLElBQUksQ0FBQztnQkFDeEYsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFPLFFBQVEsQ0FBQztnQkFFNUMsUUFBUSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLEVBQUUsNkNBQTZDLE9BQU8sQ0FBQyxZQUFZLFlBQVksQ0FBQyxDQUFDO2dCQUM5SCxNQUFNLEtBQUssR0FBYSxRQUFRLENBQUMsY0FBYyxDQUFDLHNCQUFzQixDQUFFLENBQUM7Z0JBQ3pFLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLDRCQUE0QixDQUFDO2dCQUVyRCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM3QyxLQUFLLENBQUMscUJBQXFCLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUdqRCxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ3hDLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDMUQsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSx1REFBdUQsU0FBUyxlQUFlLENBQUMsK0pBQStKLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFDOVMsQ0FBQyxDQUFDLENBQUM7Z0JBR0gsS0FBSyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7b0JBQ3JDLE1BQU0sT0FBTyxHQUFhLEVBQUUsQ0FBQztvQkFDN0IsS0FBSyxDQUFDLGdCQUFnQixDQUFtQixpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRTt3QkFDL0UsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPOzRCQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFLLENBQUMsQ0FBQzt3QkFDOUQsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBa0IsZUFBZSxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUssSUFBSSxDQUFDLENBQUM7d0JBQy9GLElBQUksRUFBRSxLQUFLLElBQUk7NEJBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7b0JBQ3pFLENBQUMsQ0FBQyxDQUFDO29CQUNILE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUN6QixRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLElBQUksRUFBRSxFQUFFO3dCQUN4QyxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO3FCQUN0RCxFQUFFLEdBQUcsRUFBRTt3QkFDUCxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLElBQUksRUFBRSxFQUFFLEVBQUMsVUFBVSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7b0JBQ3pGLENBQUMsQ0FBQyxDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO2dCQUdILEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsMEdBQTBHLE9BQU8sQ0FBQyxZQUFZLDBDQUEwQyxDQUFDLENBQUM7Z0JBQy9NLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsOEJBQThCLENBQUUsQ0FBQztnQkFDM0UsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7b0JBQ3hDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztvQkFDbkIsS0FBSyxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7d0JBQzNDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUN2QyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7d0JBQ2YsUUFBUSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQzFDLENBQUMsQ0FBQyxDQUFDO29CQUNILEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLDZCQUE2QixDQUFDO2dCQUN2RCxDQUFDLENBQUMsQ0FBQztZQUNKLENBQUMsQ0FBQyxDQUFDO1NBQ0g7SUFDRixDQUFDLENBQUMsQ0FBQztBQUVMLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQWMsMEJBQTBCLENBQUMsQ0FBQyxDQUFBIiwiZmlsZSI6ImV4dGVuc2lvbi9wYWdlL2FsbC1zaWRlYmFyL2FsbC1zaWRlYmFyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3BhZ2UuZC50c1wiIC8+XHJcbigoJHdyYXA6IEhUTUxFbGVtZW50IHwgbnVsbCkgPT4ge1xyXG5cdGNvbnN0IHBhZ2VzID0ge1xyXG5cdFx0bmV3cyAgICAgICAgICAgICAgICA6IFtgL25ld3MvaW5kZXhgLCBg0J3QvtCy0L7RgdGC0LhgXSxcclxuXHRcdHBQT090ICAgICAgICAgICAgICAgOiBbYHBQT090L2FkbWluYCwgYNCa0LDRgdGB0LBgXSxcclxuXHRcdC8vdXByb2NoZW5OZXcgICAgICAgICA6IFtgdXByb2NoZW5OZXcvYWRtaW5gLCBg0KPQv9GA0L7RidGR0L3QvdGL0LlgXSxcclxuXHRcdHVwcm9jaGVuTmV3SkYwMTAwMTAzOiBbYHVwcm9jaGVuTmV3SkYwMTAwMTAzL2FkbWluYCwgYNCj0L/RgNC+0YnRkdC90L3Ri9C5IDxzdXA+0L3QvtCy0LDRjzwvc3VwPmBdLFxyXG5cdFx0Ly9wb2RvaCAgICAgICAgICAgICAgIDogW2Bwb2RvaC9hZG1pbmAsIGDQn9C+0LTQvtGF0L7QtNC90YvQuWBdLFxyXG5cdFx0cG9kb2hOZXcgICAgICAgICAgICA6IFtgcG9kb2hOZXcvYWRtaW5gLCBg0J/QvtC00L7RhdC+0LTQvdGL0LkgPHN1cD7QvdC+0LLQsNGPPC9zdXA+YF0sXHJcblx0XHRkZWNsTmFsT2Jvcm90ICAgICAgIDogW2BkZWNsTmFsT2Jvcm90L2FkbWluYCwgYNCe0LHQvtGA0L7RgmBdLFxyXG5cdFx0Ly9kZWNscHJpYk5ldyAgICAgICAgIDogW2BkZWNscHJpYk5ldy9hZG1pbmAsIGDQn9GA0LjQsdGL0LvRjGBdLFxyXG5cdFx0ZGVjbHByaWIyMCAgICAgICAgICA6IFtgZGVjbHByaWIyMC9hZG1pbmAsIGDQn9GA0LjQsdGL0LvRjCA8c3VwPjAxLjAxLjIwMjA8L3N1cD5gXSxcclxuXHRcdGVzdlByZXBkciAgICAgICAgICAgOiBbYGVzdlByZXBkci9hZG1pbmAsIGDQldCh0JIgPHN1cD7RgNCw0LHQvtGC0L3QuNC60Lg8L3N1cD5gXSxcclxuXHRcdGVzdlllYXIyICAgICAgICAgICAgOiBbYGVzdlllYXIvYWRtaW4yYCwgYNCV0KHQkiA8c3VwPtC/0YDQuNCx0YvQu9GMPC9zdXA+YF0sXHJcblx0XHRlc3ZZZWFyICAgICAgICAgICAgIDogW2Blc3ZZZWFyL2FkbWluYCwgYNCV0KHQkiA8c3VwPtCz0L7QtDwvc3VwPmBdLFxyXG5cdFx0bmFsUmFzY2hldFZpbm9ncmFkICA6IFtgbmFsUmFzY2hldFZpbm9ncmFkL2FkbWluYCwgYNCl0LzQtdC70YxgXSxcclxuXHRcdGRlY2xWb2RhTmV3ICAgICAgICAgOiBbYGRlY2xWb2RhTmV3L2FkbWluYCwgYNCS0L7QtNCwYF0sXHJcblx0XHRlY29sb2dpeWEgICAgICAgICAgIDogW2BlY29sb2dpeWEvYWRtaW5gLCBg0K3QutC+0LvQvtCz0LjRj2BdLFxyXG5cdFx0emVtRGVjbCAgICAgICAgICAgICA6IFtgemVtRGVjbC9hZG1pbmAsIGDQl9C10LzQu9GPYF0sXHJcblx0XHRkb2dvdm9yU2lnbiAgICAgICAgIDogW2Bkb2dvdm9yU2lnbi9hZG1pbmAsIGDQlNC+0LPQvtCy0L7RgCDQrdCUYF0sXHJcblx0XHRhY3RTdmVyICAgICAgICAgICAgIDogW2BhY3RTdmVyL2FkbWluYCwgYNCQ0LrRgiDRgdCy0LXRgNC60LhgXVxyXG5cdH07XHJcblx0XHJcblx0aWYgKCR3cmFwID09PSBudWxsKSByZXR1cm47XHJcblx0aWYgKCFpc0NsaWVudExvZ2dlZCkgcmV0dXJuICR3cmFwLnJlbW92ZSgpO1xyXG5cdGRvY3VtZW50LmJvZHkucHJlcGVuZCgkd3JhcCk7XHJcblx0XHJcblx0JHdyYXAucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oYGJyYCkuZm9yRWFjaCgkYnIgPT4gJGJyLnJlbW92ZSgpKTtcclxuXHRcclxuXHRjb25zdCAkc2lkZWJhciA9ICR3cmFwLnF1ZXJ5U2VsZWN0b3IoYC5zaWRlYmFyYCkhO1xyXG5cdFxyXG5cdCRzaWRlYmFyLnF1ZXJ5U2VsZWN0b3JBbGwoYC5zaWRlYmFyLW1lbnUgYWApLmZvckVhY2goJGEgPT4ge1xyXG5cdFx0aWYgKCRhLmdldEF0dHJpYnV0ZShgaHJlZmApID09PSBgI2ApIHJldHVybjtcclxuXHRcdCRzaWRlYmFyLmFwcGVuZCgkYSk7XHJcblx0fSk7XHJcblx0XHJcblx0JHNpZGViYXIucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oYC5zaWRlYmFyLW1lbnVgKSEucmVtb3ZlKCk7XHJcblx0Y29uc3QgJGxpbmtEb2N1bWVudCA9ICRzaWRlYmFyLnF1ZXJ5U2VsZWN0b3IoYFtocmVmPSdpbmRleC5waHA/cj1kT0NTL2FkbWluJ10gc3BhbmApO1xyXG5cdGlmICgkbGlua0RvY3VtZW50ICE9PSBudWxsKSAkbGlua0RvY3VtZW50LmlubmVySFRNTCA9IGDQlNC+0LrRg9C80LXQvdGC0YtgO1xyXG5cdFxyXG5cdC8vIG1hbmlmZXN0XHJcblx0Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoXHJcblx0XHRkb2N1bWVudC5oZWFkLmRhdGFzZXQuZXh0ZW5zaW9uSWQgfHwgYGAsXHJcblx0XHR7Z2V0Q2xpZW50U2lkZWJhcjogY2xpZW50SWR9LFxyXG5cdFx0KHtJRCwgc2lkZWJhcn0pID0+IHtcclxuXHRcdFx0T2JqZWN0LmVudHJpZXMocGFnZXMpLmZvckVhY2goKFtrLCB2XSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGlzQWN0aXZlID0gayA9PT0gcGFnZU5hbWUgPyBgYWN0aXZlYCA6IGBgO1xyXG5cdFx0XHRcdGNvbnN0IGlzU2hvdyAgID0gc2lkZWJhci5pbmRleE9mKGspIDwgMCA/IGB0cnVlYCA6IGBmYWxzZWA7XHJcblx0XHRcdFx0JHNpZGViYXIuaW5zZXJ0QWRqYWNlbnRIVE1MKGBiZWZvcmVlbmRgLCBgPGEgaHJlZj1cIi9wcml2Y2FiL2luZGV4LnBocD9yPSR7dlswXX1cIiBjbGFzcz1cIiR7aXNBY3RpdmV9XCIgZGF0YS1zaG93PVwiJHtpc1Nob3d9XCIgZGF0YS1uYW1lPVwiJHtrfVwiPjxkaXY+PGkgY2xhc3M9XCJmYSBmYS1maWxlcy1vXCI+PC9pPjxzcGFuPiR7dlsxXX08L3NwYW4+PC9kaXY+PC9hPmApXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpZiAoSUQgPiAwKSB7XHJcblx0XHRcdFx0Y29uc3QgJGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KGAubWFpbi1oZWFkZXJgKTtcclxuXHRcdFx0XHRpZiAoJGhlYWRlciA9PT0gbnVsbCkgcmV0dXJuO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdCRzaWRlYmFyLmluc2VydEFkamFjZW50SFRNTChgYmVmb3JlZW5kYCwgYDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjxidXR0b24gaWQ9XCJhbGwtc2lkZWJhci1zZXR0aW5nLWJ0blwiIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4tcHJpbWFyeVwiPtCd0LDRgdGC0YDQvtC40YLRjDwvYnV0dG9uPjwvZGl2PmApO1xyXG5cdFx0XHRcdGNvbnN0ICRzaG93QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGFsbC1zaWRlYmFyLXNldHRpbmctYnRuYCkhO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdCRzaG93QnRuLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdCRzaG93QnRuLnN0eWxlLmRpc3BsYXkgPSBgbm9uZWA7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7d2luZG93LmlubmVyV2lkdGggLSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRofXB4YDtcclxuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgICAgID0gYGhpZGRlbmA7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKGBhZnRlcmJlZ2luYCwgYDxkaXYgaWQ9XCJzaWRlYmFyLXNldHRpbmctd3JhcFwiIHN0eWxlPVwidG9wOiR7JGhlYWRlci5vZmZzZXRIZWlnaHR9cHhcIj48L2Rpdj5gKTtcclxuXHRcdFx0XHRcdGNvbnN0ICR3cmFwICAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzaWRlYmFyLXNldHRpbmctd3JhcGApITtcclxuXHRcdFx0XHRcdCR3cmFwLnN0eWxlLmFuaW1hdGlvbiA9IGBzaWRlYmFyLWZhZGUtaW4gNDAwbXMgYm90aGA7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0ICRpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGRpdmApO1xyXG5cdFx0XHRcdFx0JHdyYXAuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGBiZWZvcmVlbmRgLCAkaW5uZXIpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBwYWdlc1xyXG5cdFx0XHRcdFx0T2JqZWN0LmVudHJpZXMocGFnZXMpLmZvckVhY2goKFtrLCB2XSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBpc0NoZWNrZWQgPSBzaWRlYmFyLmluZGV4T2YoaykgPCAwID8gYGNoZWNrZWRgIDogYGA7XHJcblx0XHRcdFx0XHRcdCRpbm5lci5pbnNlcnRBZGphY2VudEhUTUwoYGJlZm9yZWVuZGAsIGA8bGFiZWw+PGxhYmVsIGNsYXNzPVwicm9ja2VyXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiICR7aXNDaGVja2VkfSBkYXRhLW5hbWU9XCIke2t9XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+PHNwYW4gY2xhc3M9XCJzd2l0Y2gtbGVmdFwiPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+PC9zcGFuPjxzcGFuIGNsYXNzPVwic3dpdGNoLXJpZ2h0XCI+PGkgY2xhc3M9XCJmYSBmYS1jbG9zZVwiPjwvaT48L3NwYW4+PC9sYWJlbD48c3Bhbj4ke3ZbMV19PC9zcGFuPjwvbGFiZWw+YCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gY2hhbmdlXHJcblx0XHRcdFx0XHQkd3JhcC5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2VgLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHNpZGViYXI6IHN0cmluZ1tdID0gW107XHJcblx0XHRcdFx0XHRcdCR3cmFwLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oYFt0eXBlPWNoZWNrYm94XWApLmZvckVhY2goJGNoZWNrYm94ID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoISRjaGVja2JveC5jaGVja2VkKSBzaWRlYmFyLnB1c2goJGNoZWNrYm94LmRhdGFzZXQubmFtZSEpO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0ICRhID0gJHNpZGViYXIucXVlcnlTZWxlY3RvcjxIVE1MTGlua0VsZW1lbnQ+KGBbZGF0YS1uYW1lPSckeyRjaGVja2JveC5kYXRhc2V0Lm5hbWUhfSddYCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCRhICE9PSBudWxsKSAkYS5kYXRhc2V0LnNob3cgPSAkY2hlY2tib3guY2hlY2tlZCA/IGB0cnVlYCA6IGBmYWxzZWA7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZShcclxuXHRcdFx0XHRcdFx0XHRkb2N1bWVudC5oZWFkLmRhdGFzZXQuZXh0ZW5zaW9uSWQgfHwgYGAsIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldENsaWVudFNpZGViYXI6IGNsaWVudElkLCBzaWRlYmFyOiBzaWRlYmFyLmpvaW4oYCxgKVxyXG5cdFx0XHRcdFx0XHRcdH0sICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKGRvY3VtZW50LmhlYWQuZGF0YXNldC5leHRlbnNpb25JZCB8fCBgYCwge3VwZGF0ZURhdGE6IHRydWV9KTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBjbG9zZVxyXG5cdFx0XHRcdFx0JHdyYXAuaW5zZXJ0QWRqYWNlbnRIVE1MKGBhZnRlcmVuZGAsIGA8YnV0dG9uIGlkPVwic2lkZWJhci1zZXR0aW5nLWNsb3NlLWJ1dHRvblwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyIGJ0bi1kZWZhdWx0XCIgIHN0eWxlPVwidG9wOiR7JGhlYWRlci5vZmZzZXRIZWlnaHR9cHhcIj48aSBjbGFzcz1cImZhIGZhLWNsb3NlXCI+PC9pPjwvYnV0dG9uPmApO1xyXG5cdFx0XHRcdFx0Y29uc3QgJGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNpZGViYXItc2V0dGluZy1jbG9zZS1idXR0b25gKSE7XHJcblx0XHRcdFx0XHQkY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdCRjbG9zZUJ0bi5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0JHdyYXAuYWRkRXZlbnRMaXN0ZW5lcihgYW5pbWF0aW9uZW5kYCwgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKGBzdHlsZWApO1xyXG5cdFx0XHRcdFx0XHRcdCR3cmFwLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdCRzaG93QnRuLnN0eWxlLnJlbW92ZVByb3BlcnR5KGBkaXNwbGF5YCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQkd3JhcC5zdHlsZS5hbmltYXRpb24gPSBgc2lkZWJhci1mYWRlLW91dCA0MDBtcyBib3RoYDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcclxufSkoZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oYC53cmFwcGVyID4gLm1haW4tc2lkZWJhcmApKVxyXG5cclxuXHJcbiJdfQ==
