"use strict";
const sidebar_pages = {
    news: [`/news/index`, `Новости`],
    pPOOt: [`pPOOt/admin`, `Касса`],
    uprochenNewJF0100103: [`uprochenNewJF0100103/admin`, `Упрощённый <sup>новая</sup>`],
    podohNew: [`podohNew/admin`, `Подоходный <sup>новая</sup>`],
    declNalOborot: [`declNalOborot/admin`, `Оборот`],
    declprib20: [`declprib20/admin`, `Прибыль <sup>01.01.2020</sup>`],
    esvPrepdr: [`esvPrepdr/admin`, `ЕСВ <sup>работники</sup>`],
    esvYear2: [`esvYear/admin2`, `ЕСВ <sup>прибыль</sup>`],
    esvYear: [`esvYear/admin`, `ЕСВ <sup>год</sup>`],
    nalRaschetVinograd: [`nalRaschetVinograd/admin`, `Хмель`],
    declVodaNew: [`declVodaNew/admin`, `Вода`],
    ecologiya: [`ecologiya/admin`, `Экология`],
    zemDecl: [`zemDecl/admin`, `Земля`],
    dogovorSign: [`dogovorSign/admin`, `Договор ЭД`],
    actSver: [`actSver/admin`, `Акт сверки`],
    patentDecl: [`patentDecl/admin`, `Патент ФЛП`],
    declNalogGraNew: [`declNalogGraNew/admin`, `Доход ФЛП`]
};
{
    const $wrap = document.querySelector(`.wrapper > .main-sidebar`);
    if ($wrap !== null) {
        if (isClientLogged) {
            document.body.prepend($wrap);
            $wrap.querySelectorAll(`br`).forEach($br => $br.remove());
            const $sidebar = $wrap.querySelector(`.sidebar`);
            $sidebar.querySelectorAll(`.sidebar-menu a`).forEach($a => {
                if ($a.getAttribute(`href`) === `#`)
                    return;
                $sidebar.append($a);
            });
            $sidebar.querySelector(`.sidebar-menu`).remove();
            const $linkDocument = $sidebar.querySelector(`[href='index.php?r=dOCS/admin'] span`);
            if ($linkDocument !== null)
                $linkDocument.innerHTML = `Документы`;
            chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, { getClientSidebar: clientId }, ({ ID, sidebar }) => {
                Object.entries(sidebar_pages).forEach(([k, v]) => {
                    const isActive = k === pageName ? `active` : ``;
                    const isShow = sidebar.indexOf(k) < 0 ? `true` : `false`;
                    $sidebar.insertAdjacentHTML(`beforeend`, `<a href="/privcab/index.php?r=${v[0]}" class="${isActive}" data-show="${isShow}" data-name="${k}"><div><i class="fa fa-files-o"></i><span>${v[1]}</span></div></a>`);
                });
                if (ID > 0) {
                    const $header = document.querySelector(`.main-header`);
                    if ($header === null)
                        return;
                    $sidebar.insertAdjacentHTML(`beforeend`, `<div class="text-center"><button id="all-sidebar-setting-btn" class="btn btn-xs btn-primary">Настроить</button></div>`);
                    const $showBtn = document.getElementById(`all-sidebar-setting-btn`);
                    $showBtn.addEventListener(`click`, (e) => {
                        e.preventDefault();
                        $showBtn.style.display = `none`;
                        document.body.style.paddingRight = `${window.innerWidth - document.body.clientWidth}px`;
                        document.body.style.overflow = `hidden`;
                        document.body.insertAdjacentHTML(`afterbegin`, `<div id="sidebar-setting-wrap" style="top:${$header.offsetHeight}px"></div>`);
                        const $wrap = document.getElementById(`sidebar-setting-wrap`);
                        $wrap.style.animation = `sidebar-fade-in 400ms both`;
                        const $inner = document.createElement(`div`);
                        $wrap.insertAdjacentElement(`beforeend`, $inner);
                        Object.entries(sidebar_pages).forEach(([k, v]) => {
                            const isChecked = sidebar.indexOf(k) < 0 ? `checked` : ``;
                            $inner.insertAdjacentHTML(`beforeend`, `<label><label class="rocker"><input type="checkbox" ${isChecked} data-name="${k}" autocomplete="off"><span class="switch-left"><i class="fa fa-check"></i></span><span class="switch-right"><i class="fa fa-close"></i></span></label><span>${v[1]}</span></label>`);
                        });
                        $wrap.addEventListener(`change`, () => {
                            const sidebar = [];
                            $wrap.querySelectorAll(`[type=checkbox]`).forEach($checkbox => {
                                if (!$checkbox.checked)
                                    sidebar.push($checkbox.dataset.name);
                                const $a = $sidebar.querySelector(`[data-name='${$checkbox.dataset.name}']`);
                                if ($a !== null)
                                    $a.dataset.show = $checkbox.checked ? `true` : `false`;
                            });
                            chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, {
                                setClientSidebar: clientId, sidebar: sidebar.join(`,`)
                            }, () => {
                                chrome.runtime.sendMessage(document.head.dataset.extensionId || ``, { updateData: true });
                            });
                        });
                        $wrap.insertAdjacentHTML(`afterend`, `<button id="sidebar-setting-close-button" type="button" class="btn btn-danger btn-default"  style="top:${$header.offsetHeight}px"><i class="fa fa-close"></i></button>`);
                        const $closeBtn = document.getElementById(`sidebar-setting-close-button`);
                        $closeBtn.addEventListener(`click`, () => {
                            $closeBtn.remove();
                            $wrap.addEventListener(`animationend`, () => {
                                document.body.removeAttribute(`style`);
                                $wrap.remove();
                                $showBtn.style.removeProperty(`display`);
                            });
                            $wrap.style.animation = `sidebar-fade-out 400ms both`;
                        });
                    });
                }
            });
        }
        else {
            $wrap.remove();
        }
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuc2lvbi9wYWdlL2FsbC1zaWRlYmFyL2FsbC1zaWRlYmFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxNQUFNLGFBQWEsR0FBRztJQUNyQixJQUFJLEVBQWtCLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQztJQUNoRCxLQUFLLEVBQWlCLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQztJQUU5QyxvQkFBb0IsRUFBRSxDQUFDLDRCQUE0QixFQUFFLDZCQUE2QixDQUFDO0lBRW5GLFFBQVEsRUFBYyxDQUFDLGdCQUFnQixFQUFFLDZCQUE2QixDQUFDO0lBQ3ZFLGFBQWEsRUFBUyxDQUFDLHFCQUFxQixFQUFFLFFBQVEsQ0FBQztJQUV2RCxVQUFVLEVBQVksQ0FBQyxrQkFBa0IsRUFBRSwrQkFBK0IsQ0FBQztJQUMzRSxTQUFTLEVBQWEsQ0FBQyxpQkFBaUIsRUFBRSwwQkFBMEIsQ0FBQztJQUNyRSxRQUFRLEVBQWMsQ0FBQyxnQkFBZ0IsRUFBRSx3QkFBd0IsQ0FBQztJQUNsRSxPQUFPLEVBQWUsQ0FBQyxlQUFlLEVBQUUsb0JBQW9CLENBQUM7SUFDN0Qsa0JBQWtCLEVBQUksQ0FBQywwQkFBMEIsRUFBRSxPQUFPLENBQUM7SUFDM0QsV0FBVyxFQUFXLENBQUMsbUJBQW1CLEVBQUUsTUFBTSxDQUFDO0lBQ25ELFNBQVMsRUFBYSxDQUFDLGlCQUFpQixFQUFFLFVBQVUsQ0FBQztJQUNyRCxPQUFPLEVBQWUsQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDO0lBQ2hELFdBQVcsRUFBVyxDQUFDLG1CQUFtQixFQUFFLFlBQVksQ0FBQztJQUN6RCxPQUFPLEVBQWUsQ0FBQyxlQUFlLEVBQUUsWUFBWSxDQUFDO0lBQ3JELFVBQVUsRUFBWSxDQUFDLGtCQUFrQixFQUFFLFlBQVksQ0FBQztJQUN4RCxlQUFlLEVBQU8sQ0FBQyx1QkFBdUIsRUFBRSxXQUFXLENBQUM7Q0FDNUQsQ0FBQTtBQUNEO0lBQ0MsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFB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QUFFLENBQUM7Z0NBQ2YsUUFBUSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7NEJBQzFDLENBQUMsQ0FBQyxDQUFDOzRCQUNILEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLDZCQUE2QixDQUFDO3dCQUN2RCxDQUFDLENBQUMsQ0FBQztvQkFDSixDQUFDLENBQUMsQ0FBQztpQkFDSDtZQUNGLENBQUMsQ0FBQyxDQUFDO1NBQ0o7YUFBTTtZQUNOLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO0tBQ0Q7Q0FDRCIsImZpbGUiOiJleHRlbnNpb24vcGFnZS9hbGwtc2lkZWJhci9hbGwtc2lkZWJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9wYWdlLmQudHNcIiAvPlxyXG5jb25zdCBzaWRlYmFyX3BhZ2VzID0ge1xyXG5cdG5ld3MgICAgICAgICAgICAgICAgOiBbYC9uZXdzL2luZGV4YCwgYNCd0L7QstC+0YHRgtC4YF0sXHJcblx0cFBPT3QgICAgICAgICAgICAgICA6IFtgcFBPT3QvYWRtaW5gLCBg0JrQsNGB0YHQsGBdLFxyXG5cdC8vdXByb2NoZW5OZXcgICAgICAgICA6IFtgdXByb2NoZW5OZXcvYWRtaW5gLCBg0KPQv9GA0L7RidGR0L3QvdGL0LlgXSxcclxuXHR1cHJvY2hlbk5ld0pGMDEwMDEwMzogW2B1cHJvY2hlbk5ld0pGMDEwMDEwMy9hZG1pbmAsIGDQo9C/0YDQvtGJ0ZHQvdC90YvQuSA8c3VwPtC90L7QstCw0Y88L3N1cD5gXSxcclxuXHQvL3BvZG9oICAgICAgICAgICAgICAgOiBbYHBvZG9oL2FkbWluYCwgYNCf0L7QtNC+0YXQvtC00L3Ri9C5YF0sXHJcblx0cG9kb2hOZXcgICAgICAgICAgICA6IFtgcG9kb2hOZXcvYWRtaW5gLCBg0J/QvtC00L7RhdC+0LTQvdGL0LkgPHN1cD7QvdC+0LLQsNGPPC9zdXA+YF0sXHJcblx0ZGVjbE5hbE9ib3JvdCAgICAgICA6IFtgZGVjbE5hbE9ib3JvdC9hZG1pbmAsIGDQntCx0L7RgNC+0YJgXSxcclxuXHQvL2RlY2xwcmliTmV3ICAgICAgICAgOiBbYGRlY2xwcmliTmV3L2FkbWluYCwgYNCf0YDQuNCx0YvQu9GMYF0sXHJcblx0ZGVjbHByaWIyMCAgICAgICAgICA6IFtgZGVjbHByaWIyMC9hZG1pbmAsIGDQn9GA0LjQsdGL0LvRjCA8c3VwPjAxLjAxLjIwMjA8L3N1cD5gXSxcclxuXHRlc3ZQcmVwZHIgICAgICAgICAgIDogW2Blc3ZQcmVwZHIvYWRtaW5gLCBg0JXQodCSIDxzdXA+0YDQsNCx0L7RgtC90LjQutC4PC9zdXA+YF0sXHJcblx0ZXN2WWVhcjIgICAgICAgICAgICA6IFtgZXN2WWVhci9hZG1pbjJgLCBg0JXQodCSIDxzdXA+0L/RgNC40LHRi9C70Yw8L3N1cD5gXSxcclxuXHRlc3ZZZWFyICAgICAgICAgICAgIDogW2Blc3ZZZWFyL2FkbWluYCwgYNCV0KHQkiA8c3VwPtCz0L7QtDwvc3VwPmBdLFxyXG5cdG5hbFJhc2NoZXRWaW5vZ3JhZCAgOiBbYG5hbFJhc2NoZXRWaW5vZ3JhZC9hZG1pbmAsIGDQpdC80LXQu9GMYF0sXHJcblx0ZGVjbFZvZGFOZXcgICAgICAgICA6IFtgZGVjbFZvZGFOZXcvYWRtaW5gLCBg0JLQvtC00LBgXSxcclxuXHRlY29sb2dpeWEgICAgICAgICAgIDogW2BlY29sb2dpeWEvYWRtaW5gLCBg0K3QutC+0LvQvtCz0LjRj2BdLFxyXG5cdHplbURlY2wgICAgICAgICAgICAgOiBbYHplbURlY2wvYWRtaW5gLCBg0JfQtdC80LvRj2BdLFxyXG5cdGRvZ292b3JTaWduICAgICAgICAgOiBbYGRvZ292b3JTaWduL2FkbWluYCwgYNCU0L7Qs9C+0LLQvtGAINCt0JRgXSxcclxuXHRhY3RTdmVyICAgICAgICAgICAgIDogW2BhY3RTdmVyL2FkbWluYCwgYNCQ0LrRgiDRgdCy0LXRgNC60LhgXSxcclxuXHRwYXRlbnREZWNsICAgICAgICAgIDogW2BwYXRlbnREZWNsL2FkbWluYCwgYNCf0LDRgtC10L3RgiDQpNCb0J9gXSxcclxuXHRkZWNsTmFsb2dHcmFOZXcgICAgIDogW2BkZWNsTmFsb2dHcmFOZXcvYWRtaW5gLCBg0JTQvtGF0L7QtCDQpNCb0J9gXVxyXG59XHJcbntcclxuXHRjb25zdCAkd3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KGAud3JhcHBlciA+IC5tYWluLXNpZGViYXJgKTtcclxuXHRpZiAoJHdyYXAgIT09IG51bGwpIHtcclxuXHRcdFxyXG5cdFx0aWYgKGlzQ2xpZW50TG9nZ2VkKSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkucHJlcGVuZCgkd3JhcCk7XHJcblx0XHRcdFxyXG5cdFx0XHQkd3JhcC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihgYnJgKS5mb3JFYWNoKCRiciA9PiAkYnIucmVtb3ZlKCkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgJHNpZGViYXIgPSAkd3JhcC5xdWVyeVNlbGVjdG9yKGAuc2lkZWJhcmApITtcclxuXHRcdFx0XHJcblx0XHRcdCRzaWRlYmFyLnF1ZXJ5U2VsZWN0b3JBbGwoYC5zaWRlYmFyLW1lbnUgYWApLmZvckVhY2goJGEgPT4ge1xyXG5cdFx0XHRcdGlmICgkYS5nZXRBdHRyaWJ1dGUoYGhyZWZgKSA9PT0gYCNgKSByZXR1cm47XHJcblx0XHRcdFx0JHNpZGViYXIuYXBwZW5kKCRhKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQkc2lkZWJhci5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihgLnNpZGViYXItbWVudWApIS5yZW1vdmUoKTtcclxuXHRcdFx0Y29uc3QgJGxpbmtEb2N1bWVudCA9ICRzaWRlYmFyLnF1ZXJ5U2VsZWN0b3IoYFtocmVmPSdpbmRleC5waHA/cj1kT0NTL2FkbWluJ10gc3BhbmApO1xyXG5cdFx0XHRpZiAoJGxpbmtEb2N1bWVudCAhPT0gbnVsbCkgJGxpbmtEb2N1bWVudC5pbm5lckhUTUwgPSBg0JTQvtC60YPQvNC10L3RgtGLYDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIG1hbmlmZXN0XHJcblx0XHRcdGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKFxyXG5cdFx0XHRcdGRvY3VtZW50LmhlYWQuZGF0YXNldC5leHRlbnNpb25JZCB8fCBgYCxcclxuXHRcdFx0XHR7Z2V0Q2xpZW50U2lkZWJhcjogY2xpZW50SWR9LFxyXG5cdFx0XHRcdCh7SUQsIHNpZGViYXJ9KSA9PiB7XHJcblx0XHRcdFx0XHRPYmplY3QuZW50cmllcyhzaWRlYmFyX3BhZ2VzKS5mb3JFYWNoKChbaywgdl0pID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaXNBY3RpdmUgPSBrID09PSBwYWdlTmFtZSA/IGBhY3RpdmVgIDogYGA7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGlzU2hvdyA9IHNpZGViYXIuaW5kZXhPZihrKSA8IDAgPyBgdHJ1ZWAgOiBgZmFsc2VgO1xyXG5cdFx0XHRcdFx0XHQkc2lkZWJhci5pbnNlcnRBZGphY2VudEhUTUwoYGJlZm9yZWVuZGAsIGA8YSBocmVmPVwiL3ByaXZjYWIvaW5kZXgucGhwP3I9JHt2WzBdfVwiIGNsYXNzPVwiJHtpc0FjdGl2ZX1cIiBkYXRhLXNob3c9XCIke2lzU2hvd31cIiBkYXRhLW5hbWU9XCIke2t9XCI+PGRpdj48aSBjbGFzcz1cImZhIGZhLWZpbGVzLW9cIj48L2k+PHNwYW4+JHt2WzFdfTwvc3Bhbj48L2Rpdj48L2E+YClcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0aWYgKElEID4gMCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCAkaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oYC5tYWluLWhlYWRlcmApO1xyXG5cdFx0XHRcdFx0XHRpZiAoJGhlYWRlciA9PT0gbnVsbCkgcmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0JHNpZGViYXIuaW5zZXJ0QWRqYWNlbnRIVE1MKGBiZWZvcmVlbmRgLCBgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+PGJ1dHRvbiBpZD1cImFsbC1zaWRlYmFyLXNldHRpbmctYnRuXCIgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1wcmltYXJ5XCI+0J3QsNGB0YLRgNC+0LjRgtGMPC9idXR0b24+PC9kaXY+YCk7XHJcblx0XHRcdFx0XHRcdGNvbnN0ICRzaG93QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGFsbC1zaWRlYmFyLXNldHRpbmctYnRuYCkhO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0JHNob3dCdG4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHQkc2hvd0J0bi5zdHlsZS5kaXNwbGF5ID0gYG5vbmVgO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7d2luZG93LmlubmVyV2lkdGggLSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRofXB4YDtcclxuXHRcdFx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gYGhpZGRlbmA7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoYGFmdGVyYmVnaW5gLCBgPGRpdiBpZD1cInNpZGViYXItc2V0dGluZy13cmFwXCIgc3R5bGU9XCJ0b3A6JHskaGVhZGVyLm9mZnNldEhlaWdodH1weFwiPjwvZGl2PmApO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0ICR3cmFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNpZGViYXItc2V0dGluZy13cmFwYCkhO1xyXG5cdFx0XHRcdFx0XHRcdCR3cmFwLnN0eWxlLmFuaW1hdGlvbiA9IGBzaWRlYmFyLWZhZGUtaW4gNDAwbXMgYm90aGA7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgJGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCk7XHJcblx0XHRcdFx0XHRcdFx0JHdyYXAuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGBiZWZvcmVlbmRgLCAkaW5uZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHBhZ2VzXHJcblx0XHRcdFx0XHRcdFx0T2JqZWN0LmVudHJpZXMoc2lkZWJhcl9wYWdlcykuZm9yRWFjaCgoW2ssIHZdKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpc0NoZWNrZWQgPSBzaWRlYmFyLmluZGV4T2YoaykgPCAwID8gYGNoZWNrZWRgIDogYGA7XHJcblx0XHRcdFx0XHRcdFx0XHQkaW5uZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKGBiZWZvcmVlbmRgLCBgPGxhYmVsPjxsYWJlbCBjbGFzcz1cInJvY2tlclwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAke2lzQ2hlY2tlZH0gZGF0YS1uYW1lPVwiJHtrfVwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPjxzcGFuIGNsYXNzPVwic3dpdGNoLWxlZnRcIj48aSBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9pPjwvc3Bhbj48c3BhbiBjbGFzcz1cInN3aXRjaC1yaWdodFwiPjxpIGNsYXNzPVwiZmEgZmEtY2xvc2VcIj48L2k+PC9zcGFuPjwvbGFiZWw+PHNwYW4+JHt2WzFdfTwvc3Bhbj48L2xhYmVsPmApO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGNoYW5nZVxyXG5cdFx0XHRcdFx0XHRcdCR3cmFwLmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNpZGViYXI6IHN0cmluZ1tdID0gW107XHJcblx0XHRcdFx0XHRcdFx0XHQkd3JhcC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KGBbdHlwZT1jaGVja2JveF1gKS5mb3JFYWNoKCRjaGVja2JveCA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghJGNoZWNrYm94LmNoZWNrZWQpIHNpZGViYXIucHVzaCgkY2hlY2tib3guZGF0YXNldC5uYW1lISk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0ICRhID0gJHNpZGViYXIucXVlcnlTZWxlY3RvcjxIVE1MTGlua0VsZW1lbnQ+KGBbZGF0YS1uYW1lPSckeyRjaGVja2JveC5kYXRhc2V0Lm5hbWUhfSddYCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICgkYSAhPT0gbnVsbCkgJGEuZGF0YXNldC5zaG93ID0gJGNoZWNrYm94LmNoZWNrZWQgPyBgdHJ1ZWAgOiBgZmFsc2VgO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZShcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5kYXRhc2V0LmV4dGVuc2lvbklkIHx8IGBgLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0Q2xpZW50U2lkZWJhcjogY2xpZW50SWQsIHNpZGViYXI6IHNpZGViYXIuam9pbihgLGApXHJcblx0XHRcdFx0XHRcdFx0XHRcdH0sICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZShkb2N1bWVudC5oZWFkLmRhdGFzZXQuZXh0ZW5zaW9uSWQgfHwgYGAsIHt1cGRhdGVEYXRhOiB0cnVlfSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGNsb3NlXHJcblx0XHRcdFx0XHRcdFx0JHdyYXAuaW5zZXJ0QWRqYWNlbnRIVE1MKGBhZnRlcmVuZGAsIGA8YnV0dG9uIGlkPVwic2lkZWJhci1zZXR0aW5nLWNsb3NlLWJ1dHRvblwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyIGJ0bi1kZWZhdWx0XCIgIHN0eWxlPVwidG9wOiR7JGhlYWRlci5vZmZzZXRIZWlnaHR9cHhcIj48aSBjbGFzcz1cImZhIGZhLWNsb3NlXCI+PC9pPjwvYnV0dG9uPmApO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0ICRjbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzaWRlYmFyLXNldHRpbmctY2xvc2UtYnV0dG9uYCkhO1xyXG5cdFx0XHRcdFx0XHRcdCRjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdCRjbG9zZUJ0bi5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdCR3cmFwLmFkZEV2ZW50TGlzdGVuZXIoYGFuaW1hdGlvbmVuZGAsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoYHN0eWxlYCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdCR3cmFwLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQkc2hvd0J0bi5zdHlsZS5yZW1vdmVQcm9wZXJ0eShgZGlzcGxheWApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHQkd3JhcC5zdHlsZS5hbmltYXRpb24gPSBgc2lkZWJhci1mYWRlLW91dCA0MDBtcyBib3RoYDtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkd3JhcC5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0iXX0=
