"use strict";
document.title = `Упрощённый ${document.title}`;
{
    const $form = document.getElementById(`uprochen-new-form`);
    const $submit = $form.querySelector(`.row.buttons input`);
    if ($submit !== null) {
        $submit.removeAttribute(`style`);
        $submit.classList.add(`btn`, `btn-primary`, `btn-block`);
    }
    {
        const $type_decl = document.getElementById(`UprochenNewJF0100103_type_decl`);
        const $type_period = document.getElementById(`UprochenNewJF0100103_type_period`);
        const $month_report = document.getElementById(`UprochenNewJF0100103_month_report`);
        const $row1 = document.getElementById(`UprochenNewJF0100103_row1`);
        const $view1 = document.getElementById(`view1`);
        $view1.querySelectorAll(`:scope > *`).forEach($elem => $view1.append($elem));
        $view1.querySelectorAll(`[type=text], select`).forEach($input => {
            $input.classList.add(`form-control`);
            $input.removeAttribute(`style`);
        });
        const $row2 = document.getElementById(`UprochenNewJF0100103_row2`);
        $row2.closest(`tr`).insertAdjacentHTML(`beforebegin`, `<tr><td></td><td id="saldo-row2-td-1" class="text-right"></td><td id="saldo-row2-td-2"></td></tr>`);
        const $row2_td1 = document.getElementById(`saldo-row2-td-1`);
        const $row2_td2 = document.getElementById(`saldo-row2-td-2`);
        $row2_td2.addEventListener(`click`, e => {
            const $btn = e.target.closest(`button`);
            if ($btn !== null)
                $row1.value = $btn.innerText;
        });
        $row2.readOnly = true;
        $row2.removeAttribute(`onkeyup`);
        $row2.addEventListener(`input`, () => {
            if (!$row2.readOnly)
                return;
            const row2 = parseInt($row2_1.value) + parseInt($row2_2.value) - parseInt($row2_3.value);
            if (isNaN(row2))
                return;
            $row2.value = row2.toString();
            $row2_td1.innerHTML = ``;
            $row2_td2.innerHTML = ``;
            if ((+$type_decl.value !== 1 && +$type_decl.value !== 2) || +$type_period.value !== 1)
                return;
            const month = parseInt($month_report.value);
            let row1 = parseInt($row1.value);
            if (isNaN(month) || isNaN(row1))
                return;
            if (month === 1)
                row1 = 0;
            $row2_td1.innerHTML = `Новая сумма за год: <b>${row1}</b> + <b>${row2}</b> = &nbsp;`;
            $row2_td2.innerHTML = `<button type="button" class="btn btn-primary btn-sm btn-block">${row1 + row2}</button>`;
            window.decl1($form);
        });
        $type_decl.addEventListener(`change`, () => $row2.dispatchEvent(new InputEvent(`input`)));
        $type_period.addEventListener(`change`, () => $row2.dispatchEvent(new InputEvent(`input`)));
        $month_report.addEventListener(`change`, () => $row2.dispatchEvent(new InputEvent(`input`)));
        const $row2_1 = document.getElementById(`UprochenNewJF0100103_row2_1`);
        const $row2_2 = document.getElementById(`UprochenNewJF0100103_row2_2`);
        const $row2_3 = document.getElementById(`UprochenNewJF0100103_row2_3`);
        [$row2_1, $row2_2, $row2_3].forEach($row => {
            $row.removeAttribute(`onkeyup`);
            $row.addEventListener(`input`, () => $row2.dispatchEvent(new InputEvent(`input`)));
        });
        [`UprochenNewJF0100103_row4`, `UprochenNewJF0100103_row5`].forEach(id => {
            const $select = document.getElementById(id);
            if ($select === null)
                return;
            $select.insertAdjacentHTML(`beforebegin`, `<div class="input-group"><span class="input-group-addon">%</span>`);
            $select.nextElementSibling.remove();
            $select.previousElementSibling.insertAdjacentElement(`afterbegin`, $select);
        });
        const $manually = $view1.querySelector(`[onclick='EditAll()']`);
        if ($manually !== null) {
            $manually.classList.add(`btn`, `btn-default`);
            $manually.removeAttribute(`onclick`);
            $manually.addEventListener(`click`, () => {
                if (!confirm(`Отключить ручное редактирование возможно только после обновления страницы. Продолжить?`))
                    return;
                $manually.insertAdjacentHTML(`afterend`, `<div class="alert alert-warning">Включено ручное редактирование!</div>`);
                $row2.readOnly = false;
                $manually.remove();
                window.EditAll();
            });
        }
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuc2lvbi1vcGVyYS9leHRlbnNpb24vcGFnZS91cHJvY2hlbk5ld0pGMDEwMDEwMy91cHJvY2hlbk5ld0pGMDEwMDEwMy1lZGl0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxRQUFRLENBQUMsS0FBSyxHQUFHLGNBQWMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2hEO0lBQ0MsTUFBTSxLQUFLLEdBQUssUUFBUSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBRSxDQUFDO0lBQzlELE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUMxRCxJQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7UUFDckIsT0FBTyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNqQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0tBQ3pEO0lBR0Q7UUFDQyxNQUFNLFVBQVUsR0FBeUIsUUFBUSxDQUFDLGNBQWMsQ0FBQyxnQ0FBZ0MsQ0FBRSxDQUFDO1FBQ3BHLE1BQU0sWUFBWSxHQUF1QixRQUFRLENBQUMsY0FBYyxDQUFDLGtDQUFrQyxDQUFFLENBQUM7UUFDdEcsTUFBTSxhQUFhLEdBQXNCLFFBQVEsQ0FBQyxjQUFjLENBQUMsbUNBQW1DLENBQUUsQ0FBQztRQUN2RyxNQUFNLEtBQUssR0FBNkIsUUFBUSxDQUFDLGNBQWMsQ0FBQywyQkFBMkIsQ0FBRSxDQUFDO1FBQzlGLE1BQU0sTUFBTSxHQUFVLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFFLENBQUM7UUFDeEQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUM3RSxNQUFNLENBQUMsZ0JBQWdCLENBQUMscUJBQXFC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OUUsQ0FBQyxDQUFDLENBQUM7UUFHSCxNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDaEUsSUFBSSxTQUFTLEtBQUssSUFBSSxFQUFFO1lBQ3ZCLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQztZQUM5QyxTQUFTLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3JDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO2dCQUN4QyxJQUFJLENBQUMsT0FBTyxDQUFDLHdGQUF3RixDQUFDO29CQUFFLE9BQU87Z0JBQy9HLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsd0VBQXdFLENBQUMsQ0FBQztnQkFDbkgsS0FBSyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7Z0JBQ3ZCLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFFbkIsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2xCLENBQUMsQ0FBQyxDQUFDO1NBQ0g7S0FDRDtDQUVEIiwiZmlsZSI6ImV4dGVuc2lvbi1vcGVyYS9leHRlbnNpb24vcGFnZS91cHJvY2hlbk5ld0pGMDEwMDEwMy91cHJvY2hlbk5ld0pGMDEwMDEwMy1lZGl0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3BhZ2UuZC50c1wiIC8+XHJcbmRvY3VtZW50LnRpdGxlID0gYNCj0L/RgNC+0YnRkdC90L3Ri9C5ICR7ZG9jdW1lbnQudGl0bGV9YDtcclxue1xyXG5cdGNvbnN0ICRmb3JtICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdXByb2NoZW4tbmV3LWZvcm1gKSE7XHJcblx0Y29uc3QgJHN1Ym1pdCA9ICRmb3JtLnF1ZXJ5U2VsZWN0b3IoYC5yb3cuYnV0dG9ucyBpbnB1dGApO1xyXG5cdGlmICgkc3VibWl0ICE9PSBudWxsKSB7XHJcblx0XHQkc3VibWl0LnJlbW92ZUF0dHJpYnV0ZShgc3R5bGVgKTtcclxuXHRcdCRzdWJtaXQuY2xhc3NMaXN0LmFkZChgYnRuYCwgYGJ0bi1wcmltYXJ5YCwgYGJ0bi1ibG9ja2ApO1xyXG5cdH1cclxuXHRcclxuXHQvLzxlZGl0b3ItZm9sZCBkZXNjPVwidmlldyAxXCI+XHJcblx0e1xyXG5cdFx0Y29uc3QgJHR5cGVfZGVjbCAgICA9IDxIVE1MU2VsZWN0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgVXByb2NoZW5OZXdKRjAxMDAxMDNfdHlwZV9kZWNsYCkhO1xyXG5cdFx0Y29uc3QgJHR5cGVfcGVyaW9kICA9IDxIVE1MU2VsZWN0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgVXByb2NoZW5OZXdKRjAxMDAxMDNfdHlwZV9wZXJpb2RgKSE7XHJcblx0XHRjb25zdCAkbW9udGhfcmVwb3J0ID0gPEhUTUxTZWxlY3RFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBVcHJvY2hlbk5ld0pGMDEwMDEwM19tb250aF9yZXBvcnRgKSE7XHJcblx0XHRjb25zdCAkcm93MSAgICAgICAgID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYFVwcm9jaGVuTmV3SkYwMTAwMTAzX3JvdzFgKSE7XHJcblx0XHRjb25zdCAkdmlldzEgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHZpZXcxYCkhO1xyXG5cdFx0JHZpZXcxLnF1ZXJ5U2VsZWN0b3JBbGwoYDpzY29wZSA+ICpgKS5mb3JFYWNoKCRlbGVtID0+ICR2aWV3MS5hcHBlbmQoJGVsZW0pKTtcclxuXHRcdCR2aWV3MS5xdWVyeVNlbGVjdG9yQWxsKGBbdHlwZT10ZXh0XSwgc2VsZWN0YCkuZm9yRWFjaCgkaW5wdXQgPT4ge1xyXG5cdFx0XHQkaW5wdXQuY2xhc3NMaXN0LmFkZChgZm9ybS1jb250cm9sYCk7XHJcblx0XHRcdCRpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoYHN0eWxlYCk7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgJHJvdzIgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgVXByb2NoZW5OZXdKRjAxMDAxMDNfcm93MmApITtcclxuXHRcdCRyb3cyLmNsb3Nlc3Q8SFRNTEVsZW1lbnQ+KGB0cmApIS5pbnNlcnRBZGphY2VudEhUTUwoYGJlZm9yZWJlZ2luYCwgYDx0cj48dGQ+PC90ZD48dGQgaWQ9XCJzYWxkby1yb3cyLXRkLTFcIiBjbGFzcz1cInRleHQtcmlnaHRcIj48L3RkPjx0ZCBpZD1cInNhbGRvLXJvdzItdGQtMlwiPjwvdGQ+PC90cj5gKTtcclxuXHRcdGNvbnN0ICRyb3cyX3RkMSA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc2FsZG8tcm93Mi10ZC0xYCkhO1xyXG5cdFx0Y29uc3QgJHJvdzJfdGQyID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBzYWxkby1yb3cyLXRkLTJgKSE7XHJcblx0XHQkcm93Ml90ZDIuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBlID0+IHtcclxuXHRcdFx0Y29uc3QgJGJ0biA9ICg8SFRNTEVsZW1lbnQ+ZS50YXJnZXQpLmNsb3Nlc3QoYGJ1dHRvbmApO1xyXG5cdFx0XHRpZiAoJGJ0biAhPT0gbnVsbCkgJHJvdzEudmFsdWUgPSAkYnRuLmlubmVyVGV4dDtcclxuXHRcdH0pO1xyXG5cdFx0JHJvdzIucmVhZE9ubHkgPSB0cnVlO1xyXG5cdFx0JHJvdzIucmVtb3ZlQXR0cmlidXRlKGBvbmtleXVwYCk7XHJcblx0XHQkcm93Mi5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsICgpID0+IHtcclxuXHRcdFx0aWYgKCEkcm93Mi5yZWFkT25seSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCByb3cyID0gcGFyc2VJbnQoJHJvdzJfMS52YWx1ZSkgKyBwYXJzZUludCgkcm93Ml8yLnZhbHVlKSAtIHBhcnNlSW50KCRyb3cyXzMudmFsdWUpO1xyXG5cdFx0XHRpZiAoaXNOYU4ocm93MikpIHJldHVybjtcclxuXHRcdFx0JHJvdzIudmFsdWUgPSByb3cyLnRvU3RyaW5nKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQkcm93Ml90ZDEuaW5uZXJIVE1MID0gYGA7XHJcblx0XHRcdCRyb3cyX3RkMi5pbm5lckhUTUwgPSBgYDtcclxuXHRcdFx0aWYgKCgrJHR5cGVfZGVjbC52YWx1ZSAhPT0gMSAmJiArJHR5cGVfZGVjbC52YWx1ZSAhPT0gMikgfHwgKyR0eXBlX3BlcmlvZC52YWx1ZSAhPT0gMSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBtb250aCA9IHBhcnNlSW50KCRtb250aF9yZXBvcnQudmFsdWUpO1xyXG5cdFx0XHRsZXQgcm93MSAgICA9IHBhcnNlSW50KCRyb3cxLnZhbHVlKTtcclxuXHRcdFx0aWYgKGlzTmFOKG1vbnRoKSB8fCBpc05hTihyb3cxKSkgcmV0dXJuO1xyXG5cdFx0XHRpZiAobW9udGggPT09IDEpIHJvdzEgPSAwO1xyXG5cdFx0XHQkcm93Ml90ZDEuaW5uZXJIVE1MID0gYNCd0L7QstCw0Y8g0YHRg9C80LzQsCDQt9CwINCz0L7QtDogPGI+JHtyb3cxfTwvYj4gKyA8Yj4ke3JvdzJ9PC9iPiA9ICZuYnNwO2A7XHJcblx0XHRcdCRyb3cyX3RkMi5pbm5lckhUTUwgPSBgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXNtIGJ0bi1ibG9ja1wiPiR7cm93MSArIHJvdzJ9PC9idXR0b24+YDtcclxuXHRcdFx0Ly9AdHMtaWdub3JlXHJcblx0XHRcdHdpbmRvdy5kZWNsMSgkZm9ybSk7XHJcblx0XHR9KTtcclxuXHRcdCR0eXBlX2RlY2wuYWRkRXZlbnRMaXN0ZW5lcihgY2hhbmdlYCwgKCkgPT4gJHJvdzIuZGlzcGF0Y2hFdmVudChuZXcgSW5wdXRFdmVudChgaW5wdXRgKSkpO1xyXG5cdFx0JHR5cGVfcGVyaW9kLmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZWAsICgpID0+ICRyb3cyLmRpc3BhdGNoRXZlbnQobmV3IElucHV0RXZlbnQoYGlucHV0YCkpKTtcclxuXHRcdCRtb250aF9yZXBvcnQuYWRkRXZlbnRMaXN0ZW5lcihgY2hhbmdlYCwgKCkgPT4gJHJvdzIuZGlzcGF0Y2hFdmVudChuZXcgSW5wdXRFdmVudChgaW5wdXRgKSkpO1xyXG5cdFx0XHJcblx0XHRjb25zdCAkcm93Ml8xID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYFVwcm9jaGVuTmV3SkYwMTAwMTAzX3JvdzJfMWApITtcclxuXHRcdGNvbnN0ICRyb3cyXzIgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgVXByb2NoZW5OZXdKRjAxMDAxMDNfcm93Ml8yYCkhO1xyXG5cdFx0Y29uc3QgJHJvdzJfMyA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBVcHJvY2hlbk5ld0pGMDEwMDEwM19yb3cyXzNgKSE7XHJcblx0XHRbJHJvdzJfMSwgJHJvdzJfMiwgJHJvdzJfM10uZm9yRWFjaCgkcm93ID0+IHtcclxuXHRcdFx0JHJvdy5yZW1vdmVBdHRyaWJ1dGUoYG9ua2V5dXBgKTtcclxuXHRcdFx0JHJvdy5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsICgpID0+ICRyb3cyLmRpc3BhdGNoRXZlbnQobmV3IElucHV0RXZlbnQoYGlucHV0YCkpKTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRbYFVwcm9jaGVuTmV3SkYwMTAwMTAzX3JvdzRgLCBgVXByb2NoZW5OZXdKRjAxMDAxMDNfcm93NWBdLmZvckVhY2goaWQgPT4ge1xyXG5cdFx0XHRjb25zdCAkc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cdFx0XHRpZiAoJHNlbGVjdCA9PT0gbnVsbCkgcmV0dXJuO1xyXG5cdFx0XHQkc2VsZWN0Lmluc2VydEFkamFjZW50SFRNTChgYmVmb3JlYmVnaW5gLCBgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+PHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1hZGRvblwiPiU8L3NwYW4+YCk7XHJcblx0XHRcdCRzZWxlY3QubmV4dEVsZW1lbnRTaWJsaW5nIS5yZW1vdmUoKTtcclxuXHRcdFx0JHNlbGVjdC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIS5pbnNlcnRBZGphY2VudEVsZW1lbnQoYGFmdGVyYmVnaW5gLCAkc2VsZWN0KTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBtYW51YWxseVxyXG5cdFx0Y29uc3QgJG1hbnVhbGx5ID0gJHZpZXcxLnF1ZXJ5U2VsZWN0b3IoYFtvbmNsaWNrPSdFZGl0QWxsKCknXWApO1xyXG5cdFx0aWYgKCRtYW51YWxseSAhPT0gbnVsbCkge1xyXG5cdFx0XHQkbWFudWFsbHkuY2xhc3NMaXN0LmFkZChgYnRuYCwgYGJ0bi1kZWZhdWx0YCk7XHJcblx0XHRcdCRtYW51YWxseS5yZW1vdmVBdHRyaWJ1dGUoYG9uY2xpY2tgKTtcclxuXHRcdFx0JG1hbnVhbGx5LmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKCkgPT4ge1xyXG5cdFx0XHRcdGlmICghY29uZmlybShg0J7RgtC60LvRjtGH0LjRgtGMINGA0YPRh9C90L7QtSDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INCy0L7Qt9C80L7QttC90L4g0YLQvtC70YzQutC+INC/0L7RgdC70LUg0L7QsdC90L7QstC70LXQvdC40Y8g0YHRgtGA0LDQvdC40YbRiy4g0J/RgNC+0LTQvtC70LbQuNGC0Yw/YCkpIHJldHVybjtcclxuXHRcdFx0XHQkbWFudWFsbHkuaW5zZXJ0QWRqYWNlbnRIVE1MKGBhZnRlcmVuZGAsIGA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPtCS0LrQu9GO0YfQtdC90L4g0YDRg9GH0L3QvtC1INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUhPC9kaXY+YCk7XHJcblx0XHRcdFx0JHJvdzIucmVhZE9ubHkgPSBmYWxzZTtcclxuXHRcdFx0XHQkbWFudWFsbHkucmVtb3ZlKCk7XHJcblx0XHRcdFx0Ly9AdHMtaWdub3JlO1xyXG5cdFx0XHRcdHdpbmRvdy5FZGl0QWxsKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHQvLzwvZWRpdG9yLWZvbGQ+XHJcbn0iXX0=
